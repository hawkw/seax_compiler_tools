sudo: false
language: rust
rust: nightly
addons:
  apt:
    packages:
    - libcurl4-openssl-dev
    - libelf-dev
    - libdw-dev
before_script:
- |
  pip install 'travis-cargo<0.2' --user &&
  export PATH=$HOME/.local/bin:$PATH
script:
- travis-cargo build
- travis-cargo test
- travis-cargo bench
env:
  global:
  - TRAVIS_CARGO_NIGHTLY_FEATURE=""
after_success:
- travis-cargo coveralls --no-sudo
- bash <(curl https://codecov.io/bash)
before_deploy:
- travis-cargo doc
- travis-cargo doc-upload
- cargo build --release
- cargo package
- cargo publish --token $CRATES_TOKEN
